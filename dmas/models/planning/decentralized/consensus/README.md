# Couple-Constrained Bundle Algorithm 

Consensus algorithms have been shown to be effective at providing effective task assignemt and coordination in a decentralized manner for a plethera of multi-agent scenarios. Implementations of these algorithm have been proposed for Earth-observing satellite missions [CITE LI HERE]. Additional expansions of this algorithm have been presented that allow for the assignment of tasks requiring only local consensus that, although suboptimal, provide rapid response in agent networks with limited communication opportunities. 

This section describres an expanded implementation of the Consensus-Based Bundle Algorithm applicable to the `3DCHESS` mission concept. This planner is intended to serve as a repair strategy to existing periodic plans being generated by the agent or by ground operators. 

## Concept of Operations
> DRAFT: Reference the mission and task definitions and how we plan to schedule monitoring observations.

## Limitations of Existing Implementations
> DRAFT: Talk about limitations of existing methods for our scenario. Primeraly, the idea that a single sat to task is not the prefered output of our task assignment, but rather the coordination based on the value changing with the scheduled revisits and number of observations along with other mission-dependent objectives and requirememts.

## Proposed Bid and Results Representation
> Talk about results vectors and bids definitions.

## Algorithm Description

### Consesus Phase
Satellites are constantly listening for any incoming messages from other agents. These messages may include new task requests or bid sharing. 

Incoming tasks that were not known to the agent are then converted to empty bids to be added to the results vector $W$. 

As bids are coming in, they are compared using the following rules [CITATION NEEDED]:

![Asynchronous bid comparison rules](./bid_comparison.png)
*Asynchronous Bid Comparison Rules*


A set of tasks to rebroadcasts may result may result following this comparison of incoming bids. 

Any bid from the agent's current bundle that was outperformed by someone or was reset must be dropped along with all other subsequent bids. These modifications to the bundle are also added to the set of rebroadcasts to be performed.

The bundle-building phase will only be triggered if:
1. There are enough new incoming requests that exceed the replan threshold
2. There are relevant rebroadcasts to be performed
3. A new preplan was just created or received by the agent

### Bundle-Building Phase

